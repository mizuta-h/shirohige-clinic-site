# RIBON 連携
オリジナルテンプレートのクリニックサイトに RIBON へのリンクを設置するスクリプトです。  

## 使い方
1. 下記の `編集が必要な項目` を参考に、 `env.php` の値を編集してください。
2. 各ページにて、下記 `リンク設置方法` を参考に、必要な箇所に RIBON へのリンクをコーディングします。

## 編集が必要な項目
### config/env.php
以下の通り、内容を編集してください。  

| No. | 項目 | 内容 |
| :---: | --- | --- |
| 1 | `RIBON_UUID` | Kintone の Ribon タブにある `uuid` の値 |
| 2 | `RIBON_API_URL` | 基本的には変更の必要はありませんが、テスト時などに適宜書き換えてください<br>※ RIBON 開発用サーバー URL `https://develop.api.ribon-job.com/` |
| 3 | `RIBON_FIXED_RESPONSE` | ※オプション<br>コーディング時、任意に API からのレスポンスをシミュレートします（後述 `オプションルール` を参照してください）。 |

## リンク設置方法
リンクの具体的な設置方法をご案内します。

### 必須ルール
リンクの対象となる要素に `ribon-link` クラスを付与してください。  
このクラスを付与された要素は初期描画時に非表示となり、自動的に行われる RIBON API へのアクセスによりリンク先 URL が取得できた場合のみ非表示が解除されます。  
例： `<a class="ribon-link">RIBON へのリンク</a>`  

**[TIPS]** このとき、対象の要素が `<a>` タグであれば、自動的に `href` / `target` / `rel` / `title` を設定しますので、これらの項目は任意に省略していただいて構いません（ `<a>` タグではない場合はこれらの要素は追加されません）。  

逆に、初期描画時にバナーの代わりに何かを表示したい場合は、 `ribon-link-alt` クラスを付与してください。  
例： `<a class="ribon-link">RIBON へのリンク</a><span class="ribon-link-alt">代わりに表示する文章</span>`  
このクラスを付与された要素は、リンク先 URL が取得できた後に非表示になります。  

### オプションルール
#### 任意に表示非表示を切り替える
`env.php` にある `RIBON_FIXED_RESPONSE` の値を編集することで、 RIBON API へのアクセス結果を以下の通りシミュレートすることができます。  
**[⚠️ご注意]** リリース時には、この値が間違いなく `null` になっていることをご確認ください。  

| 値 | 状態 |
| :---: | --- |
| `'ok'` | リンク URL が取得できた状態になります。<br>ダミーとして `https://hero-innovation.com/` へのリンクを取得します。 |
| `'ng'` | リンク URL が取得できなかった状態になります。 |
| `null` | シミュレーションを解除し、実際の API アクセス結果を使います。 |

#### デフォルト画像バナーを使う
RIBON デフォルトの画像バナーを表示する場合は、 `ribon-link` に加えて `ribon-link--auto` クラスを付与してください。このとき、要素の中には何も書く必要はありません。  
例： `<div class="ribon-link ribon-link--auto"></div>`  

※ 自動的に `ribon-link--auto` 要素の中に `<a>` タグが挿入されます。したがって、当該クラスを付与する要素は `<div>` などにしてください。  

#### バナー表示タイミングを制御したい
デフォルトでは、RIBON API アクセスが終了し、データが取得でき次第、遅延なく要素を表示します（`display: none` → `initial` に変更されます）。  
自動的な `display` 変更を行わず、任意のタイミングで表示させたい場合は、 `ribon-link` に加えて `ribon-link--no-display` クラスを付与してください。  
例： `<a class="ribon-link ribon-link--no-display">自動表示しないリンク</a>`  

※ `ribon-link--auto` との併用はできません。  

### ご利用例
#### メニューに追加する
`<li>` 内にリンクを置く場合は、必要に応じて `<li>` 自体の表示も切り替える必要があるため、下記のように `li` および内部の `a` 両方に `ribon-link` クラスを付与します。  
```html
<li class="ribon-link"><a class="ribon-link">採用情報<span>RIBON</span></a></li>
```

#### 文中に混ぜる
文中にも柔軟に混ぜることができます。ただし、レイアウトや文面の崩れを防ぐために `ribon-link-alt` クラスを持つ要素でリンク取得前 / リンクが取得できないとき用の代わりの要素を追加してください。  
```html
<p>
  このように
  <a class="ribon-link">
    RIBON へのリンク
  </a>
  <span class="ribon-link-alt">
    必要に応じてリンク
  </span>
  を設置できます。
</p>
```
